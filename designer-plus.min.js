/*!
 * Waves Designer+ 0.1
 *
 * Copyright (c) 2012 Danny Casady
 * Licensed under the MIT license
 *
 * Uses some code from Stefan Petre's color picker
 * Dual licensed under the MIT and GPL licenses
 *
 * Uses some code from (c) 2009-12 Matt Wiebe's font-friend
 * Licensed under the MIT license
 *
 * Uses some code from (c) 2009-10 Ryan Seddon's font dragr
 * Licensed under the MIT license
 *
*/
(function(B,f){var s,m,y,n="undefined",G={version:"0.1",css:"#designer-plus{overflow:hidden;position:fixed;bottom:0;left:30px;background-color:#fff;background-color:rgba(255,255,255,0.93);width:740px;color:#222;-webkit-box-shadow:1px 1px 5px rgba(0,0,0,.3);-moz-box-shadow:1px 1px 5px rgba(0,0,0,.3);box-shadow:1px 1px 5px rgba(0,0,0,.3);z-index:10000;text-align:left;height:400px}#designer-plus,#ff-drop h6,#ff-drop li{line-height:1.5!important}#ff-drop{padding:12px 12px 12px 36px}#ff-toggle{background-color:#222;color:#eee;display:block;width:12px;height:16px;padding:0 1px 0 3px;position:absolute;top:0;left:0;font-size:16px;line-height:1!important;cursor:pointer;z-index:10001;-moz-transition:.25s all ease-in-out;-webkit-transition:.25s all ease-in-out;-o-transition:.25s all ease-in-out;transition:.25s all ease-in-out}#ff-toggle sup{font-size:13px;line-height:1!important;vertical-align:super;display:none}.open #ff-toggle sup{display:inline}#ff-toggle:hover{color:#fff;background-color:#555}.open #ff-toggle{width:auto;height:32px;font-size:32px;padding:0 3px}#ff-drop form{background:0;color:inherit;float:none}#ff-drop h6{font-size:13px;border-bottom:1px solid #aaa;margin:0 0 6px!important;padding:0!important;text-indent:0!important;float:none!important;height:1.5em!important;white-space:nowrap}#ff-drop>div{float:left;width:120px;padding-right:20px;margin:0!important;position:relative}#ff-drop>div.wrap>div{margin-bottom:12px;font-size:11px!important;position:relative}#ff-drop div#ff-selector{width:130px}#ff-drop div#ff-font-family{width:240px}#ff-selector p{font-size:9px!important;line-height:1.2!important;margin:1em 0 0!important;padding:0!important}#ff-controls{position:absolute!important;bottom:60px;left:65px;width:55px!important;height:60px;margin:0!important;padding:0!important}#ff-controls div{position:absolute;font-size:20px;width:1em;height:1em;color:#555;min-width:inherit!important;min-height:inherit!important;padding:0;margin:0;float:none;text-align:center}#ff-controls>div,.ff-toggler>span,#family-custom-add{font-family:sans-serif!important;font-weight:normal!important;-webkit-user-select:none;-moz-user-select:none;user-select:none;cursor:pointer}#ff-controls div:hover{color:#000}#ff-controls .up{left:1em;top:0}#ff-controls .down{left:1em;bottom:0}#ff-controls .left{left:0;top:1em}#ff-controls .right{right:-.25em;top:1em}#ff-drop #ff-font-family ul{float:left;width:110px;padding-right:5px}#ff-drop #ff-font-family ul#ff-font-family-sans{padding-right:10px;width:115px}#ff-drop ol li{list-style:none outside}#ff-drop ol,#ff-drop ul{margin:0;padding:0}#ff-drop li{font-size:11px!important; margin:0!important;padding:0!important;list-style:none outside none!important;text-indent:0!important;height:auto!important}#ff-drop li.core{margin-bottom:4px!important;padding:0!important}#ff-drop ul li:hover{cursor:pointer;background-color:#e6e6e6!important}#ff-drop ul li.family-custom{margin:12px 0 0!important}#ff-drop ul li.family-custom:hover{cursor:default;background:none!important}#family-custom-add{display:inline-block;color:#aaa;line-height:1!important;font-size:15px!important;color:#666!important;vertical-align:top;padding:1px 3px 3px}#family-custom-add:hover,#family-custom-add:focus{background-color:#555!important;color:#fff!important}#family-custom{width:85px}#ff-drop ol input[type=radio]{margin-left:-5px;width:auto!important}#ff-blah{width:100px;margin-left:5px}#ff-drop ol label{margin-left:5px;display:inline!important}#ff-drop>#ff-credit{position:absolute;bottom:21px;left:32px;font-size:9px;margin:0!important}#designer-plus a{color:#4c0003!important;text-decoration:underline!important;border:0!important}#designer-plus a:hover{color:#a60007!important}#ff-drop>#ff-clear{position:absolute;bottom:0;right:0;padding:5px 5px 0!important;text-decoration:line-through;opacity:.1;font-size:21px;margin:0!important;width:auto!important}#ff-clear:hover{opacity:1;cursor:pointer}#ff-font-drop{font-size:11px!important;background-color:#e6e6e6;padding:15px 0;text-align:center;border:1px solid #aaa;margin-bottom:6px}#ff-font-drop.dropzone{background-color:#fff;border-color:#111}#ff-drop select{width:105px!important;margin-left:15px!important}#ff-google-webfonts select{width:99%!important;margin:0!important}#ff-drop select option{font-size:10px!important}#ff-drop .ff-hidden{display:none}#ff-drop .ff-clickable{cursor:pointer;position:relative;z-index:2}#ff-font-family h6 span{text-transform:uppercase!important;font-size:75%;font-weight:normal!important;color:#111!important;letter-spacing:.02em;line-height:1;display:inline-block}#ff-font-family h6 .ff-active{color:#aaa!important}#ff-font-family .ff-custom{padding:0 6px;border-right:1px solid #bbb;margin-right:6px}#ff-badges{position:absolute;right:14px;top:0;z-index:14px}#ff-badges>img{padding:0 4px 0 0!important;margin:0!important;border:0!important;width:16px!important;height:16px!important}#ff-drop #ff-font-family #ff-font-family-custom{width:100%;-webkit-column-count:2;-moz-column-count:2;column-count:2;-webkit-column-gap:12px;-moz-column-gap:12px;column-gap:12px}.ff-toggler{position:absolute;height:20px;top:27px;left:-4px}.ff-toggler span{position:absolute;display:block;left:0;top:0;height:8px;width:8px;line-height:1!important;font-size:8px!important;text-align:center;color:#aaa!important;padding:2px 4px!important}.ff-toggler span:hover{color:#333!important}.ff-toggler span.ff-down{top:auto;bottom:0}#ff-drop [data-ff=fontFamily] li{height:1.5em!important;overflow:hidden;text-overflow:ellipsis}.colorpicker{width:356px;height:176px;overflow:hidden;position:absolute;background:url(https://raw.github.com/dpcasady/designer-plus/master/images/colorpicker_background.png);font-family:Arial,Helvetica,sans-serif;display:none;z-index:11000}.colorpicker_color{width:150px;height:150px;left:14px;top:13px;position:absolute;background:#f00;overflow:hidden;cursor:crosshair}.colorpicker_color div{position:absolute;top:0;left:0;width:150px;height:150px;background:url(https://raw.github.com/dpcasady/designer-plus/master/images/colorpicker_overlay.png)}.colorpicker_color div div{position:absolute;top:0;left:0;width:11px;height:11px;overflow:hidden;background:url(https://raw.github.com/dpcasady/designer-plus/master/images/colorpicker_select.gif);margin:-5px 0 0 -5px}.colorpicker_hue{position:absolute;top:13px;left:171px;width:35px;height:150px;cursor:n-resize}.colorpicker_hue div{position:absolute;width:35px;height:9px;overflow:hidden;background:url(https://raw.github.com/dpcasady/designer-plus/master/images/colorpicker_indic.gif) left top;margin:-4px 0 0 0;left:0}.colorpicker_new_color{position:absolute;width:60px;height:30px;left:213px;top:13px;background:#f00}.colorpicker_current_color{position:absolute;width:60px;height:30px;left:283px;top:13px;background:#f00}.colorpicker input{background-color:transparent;border:1px solid transparent;position:absolute;font-size:10px;font-family:Arial,Helvetica,sans-serif;color:#898989;top:4px;right:11px;text-align:right;margin:0;padding:0;height:11px}.colorpicker_hex{position:absolute;width:72px;height:22px;background:url(https://raw.github.com/dpcasady/designer-plus/master/images/colorpicker_hex.png) top;left:212px;top:142px}.colorpicker_hex input{right:6px}.colorpicker_field{height:22px;width:62px;background-position:top;position:absolute}.colorpicker_field span{position:absolute;width:12px;height:22px;overflow:hidden;top:0;right:0;cursor:n-resize}.colorpicker_rgb_r{background-image:url(https://raw.github.com/dpcasady/designer-plus/master/images/colorpicker_rgb_r.png);top:52px;left:212px}.colorpicker_rgb_g{background-image:url(https://raw.github.com/dpcasady/designer-plus/master/images/colorpicker_rgb_g.png);top:82px;left:212px}.colorpicker_rgb_b{background-image:url(https://raw.github.com/dpcasady/designer-plus/master/images/colorpicker_rgb_b.png);top:112px;left:212px}.colorpicker_hsb_h{background-image:url(https://raw.github.com/dpcasady/designer-plus/master/images/colorpicker_hsb_h.png);top:52px;left:282px}.colorpicker_hsb_s{background-image:url(https://raw.github.com/dpcasady/designer-plus/master/images/colorpicker_hsb_s.png);top:82px;left:282px}.colorpicker_hsb_b{background-image:url(https://raw.github.com/dpcasady/designer-plus/master/images/colorpicker_hsb_b.png);top:112px;left:282px}.colorpicker_submit{position:absolute;width:22px;height:22px;background:url(https://raw.github.com/dpcasady/designer-plus/master/images/colorpicker_submit.png) top;left:322px;top:142px;overflow:hidden}.colorpicker_focus{background-position:center}.colorpicker_hex.colorpicker_focus{background-position:bottom}.colorpicker_submit.colorpicker_focus{background-position:bottom}.colorpicker_slider{background-position:bottom}.colorSelector{position:relative;width:36px;height:36px;background:url(https://raw.github.com/dpcasady/designer-plus/master/images/select.png)}.colorSelector div{position:absolute;top:3px;left:3px;width:30px;height:30px;background:url(https://raw.github.com/dpcasady/designer-plus/master/images/select.png) center}",html:'<div id="ff-drop"><span id="ff-toggle">D<sup>+</sup></span><div id="ff-selector"><h6>Selector</h6><form action="" method="get"><ol><li><input type="radio" name="jq-select" checked="checked" id="jq1"><label for="jq1">body</label></li><li><input type="radio" name="jq-select" id="jq2"><label for="jq2">h1,h2,h3,h4,h5,h6</label></li><li><input type="radio" name="jq-select" id="jq3"><label for="jq3">p</label></li><li><input type="radio" name="jq-select" id="jq4"><input type="text" name="ff-blah" value="roll your own" id="ff-blah"></li></ol></form><p>Roll your own selector using <a href="http://api.jquery.com/category/selectors/">jQuery selectors</a>.</p><p></p><h6>Color</h6><div class="colorSelector"><div style="background-color: #0000ff"></div></div></div><div id="ff-font-family"><h6>Font Family</h6><div id="ff-badges"></div><ul id="ff-font-family-sans" data-ff="fontFamily"><li>Arial</li><li>Verdana</li><li>Tahoma</li><li class="core">Trebuchet MS</li><li>Helvetica</li><li>Helvetica Neue</li><li>Gill Sans</li><li>Century Gothic</li><li>Lucida Grande</li><li>Lucida Sans Unicode</li><li>Calibri</li><li>Corbel</li><li>Candara</li></ul><ul id="ff-font-family-serif" data-ff="fontFamily"><li>Times New Roman</li><li class="core">Georgia</li><li>Times</li><li>Palatino</li><li>Palatino Linotype</li><li>Baskerville</li><li>Hoefler Text</li><li>Garamond</li><li>Constantia</li><li>Cambria</li><li class="family-custom"><input type="text" name="family-custom" value="your font family" id="family-custom"><span id="family-custom-add">+</span></li></ul></div><div class="wrap"><div id="ff-google-webfonts"><h6>Google Web Fonts</h6><div>Loading…</div></div><div id="ff-font-size"><h6>Font Size</h6><select data-ff="fontSize"><option>10</option><option>11</option><option>12</option><option>14</option><option>16</option><option>18</option><option>21</option><option>24</option><option>36</option><option>48</option><option>60</option><option>72</option></select></div><div id="ff-font-weight"><h6>Font Weight</h6><select data-ff="fontWeight"><option>100</option><option>200</option><option>300</option><option value="400" selected>400 (normal)</option><option>500</option><option>600</option><option value="700">700 (bold)</option><option>800</option><option>900</option></select></div><div id="ff-line-height"><h6>Line Height</h6><select data-ff="lineHeight"><option>1</option><option>1.1</option><option>1.2</option><option>1.3</option><option>1.4</option><option selected>1.5</option><option>1.6</option><option>1.75</option><option>2</option><option>2.5</option><option>3</option></select></div><div id="ff-font-style"><h6>Font Style</h6><ul data-ff="fontStyle"><li>italic</li><li>normal</li></ul></div></div><div class="wrap"><div id="ff-font-face"><h6>@font-face</h6><div id="ff-font-drop">Drag a font here.</div><ul data-ff="fontFamily"></ul></div><div id="ff-text-transform"><h6>Text Transform</h6><ul data-ff="textTransform"><li>uppercase</li><li>lowercase</li><li>capitalize</li><li>none</li></ul></div><div id="ff-font-variant"><h6>Font Variant</h6><ul data-ff="fontVariant"><li>small-caps</li><li>normal</li></ul></div></div><div id="ff-controls"><div class="left">&larr;</div><div class="right">&rarr;</div><div class="up">&uarr;</div><div class="down">&darr;</div></div><div id="ff-credit">Waves Designer+</div><div id="ff-clear" title="clear all styles">D<sup>+</sup></div></div>',customFamiles:false,customFamilyMap:[],googleFamilies:{},existingGoogleFamilies:[]};
function a(){if(typeof(B.jQuery)===n){var P=f.createElement("script");P.src="http://ajax.googleapis.com/ajax/libs/jquery/1.6.2/jquery.min.js";f.getElementsByTagName("head")[0].appendChild(P);jQueryAddedInterval=setInterval(I,100)}else{M()}}a();function I(){if(typeof(B.jQuery)!==n){clearInterval(jQueryAddedInterval);M()}}function M(){s=B.jQuery;if(s("#designer-plus").size()!==0){return false}m=s("body");s("head").append('<style id="designer-plus-stylesheet" type="text/css" media="screen">'+G.css+"</style>");m.append("<div id='designer-plus'></div>");s("#designer-plus").html(G.html).addClass("open");s("#ff-credit").append("<span> "+G.version+"</span>");k();l();j();L();t();O();H();N()}function H(){var P="https://www.googleapis.com/webfonts/v1/webfonts?key=AIzaSyBUK3PeqSEzwPNIyg94dBQpziFOPvm7-aA",R=[],S=function(T){if(T.kind==="webfonts#webfontList"){s.each(T.items,function(U,V){if(s.inArray(V.family,G.existingGoogleFamilies)!==-1){V.family="✓ "+V.family}else{G.googleFamilies[V.family]=V.variants}R.push(V.family)});x(R)}else{Q()}},Q=function(){s("#ff-google-webfonts > div").html("Error loading webfonts. :(");setTimeout(function(){s("#ff-google-webfonts").fadeOut()},3500)};s.ajax({url:P,type:"GET",dataType:"jsonp",success:S,error:Q})}function x(Q){var P=['<option value="0">Choose:</option>'],Q;s.each(Q,function(S,R){P.push("<option>"+R+"</option>")});Q=s("<select>"+P.join("")+"</select>");Q.change(i);s("#ff-google-webfonts > div").html(Q)}function i(){var Q=s(this),U=Q.val(),P=U.replace(/ /g,"+"),S="http://fonts.googleapis.com/css?family=",T,R;if(U==="0"||!G.googleFamilies[U]){return}T=":"+G.googleFamilies[U].join(",");R=S+P+T;s('<link rel="stylesheet" type="text/css" href="'+R+'" >').appendTo("head");A([U],"www.google.com");Q.find(":selected").text("✓ "+U);s("#ff-font-family-custom").find("li:last").click();delete G.googleFamilies[U]}function O(){F();u();E();D()}function F(){var P=f.styleSheets||[],Q=[];s.each(P,function(R,T){try{s.each(T.cssRules,function(V,W){if(W.type===CSSRule.FONT_FACE_RULE){var U=W.style.getPropertyValue("font-family");if(U){U=U.replace(/^"|'/,"").replace(/"|'$/,"");if(U!=="testfont"){Q.push(U)}}}})}catch(S){}});if(Q.length>0){A(d(Q))}}function l(){if(typeof(designerPlusFamilies)!==n){G.customFamilies=designerPlusFamilies;if(!s.isArray(G.customFamilies)){var P=[];s.each(G.customFamilies,function(Q,R){P.push(Q)});G.customFamilies=P;G.customFamilyMap=designerPlusFamilies}}else{if(m.attr("data-ff-families")){G.customFamilies=m.attr("data-ff-families").split(",")}}}function t(){G.wfs=(B.location.href=="http://webfontspecimen.com/demo/");G.wfsName=(G.wfs)?s("h1, .bodysize tr:first-child th:first-child"):false;if(!G.wfs&&s("body").attr("id")=="Waves-web-font-specimen"){G.wfs=true;G.wfsName=s("h1, .bodysize tr:first-child th.base")}if(G.wfs){G.wfsOriginalName=s("h1").text();G.wfsTitle=s("title").text()}}function j(){s("#designer-plus").find("select").each(function(P){var Q=s('<span class="ff-toggler"><span class="ff-up" title="Increase">&#9650;</span><span class="ff-down" title="Decrease">&#9660;</span></span>');Q.insertBefore(this)});s(".ff-toggler span").click(o)}function o(Q){var P=s(this),U=Q.target.className=="ff-up",T=P.parent().next(),R=T.find(":selected"),S;S=(U)?R.next():R.prev();if(S.size()==0){S=(U)?T.find(":first"):T.find(":last")}S.attr("selected","selected");T.trigger("change")}function D(){var P=p(),Q;if(!P){return}s.getJSON("http://www.typotheque.com/ajax/webfont_api.php?key="+P,function(R){console.log(R)})}function p(){var P=false;s('link[href*="wf.typotheque.com"]').each(function(){P=s(this).attr("href").split("/").pop();return false});return P}function E(){var P=b(),R,Q=[];if(!P){return}R=P.split("family=").pop();s.each(R.split("|"),function(T,S){Q.push(S.split(":")[0].replace("+"," "))});if(Q.length>0){A(Q,"www.google.com");G.existingGoogleFamilies=Q}}function b(){var P=false;s('link[href*="fonts.googleapis.com"]').each(function(){P=s(this).attr("href");return false});return P}function J(){var P=null;
s("script").each(function(R){var Q=this.src.match(/use\.typekit\.com\/(.+)\.js/);if(Q){P=Q[1];return false}});return P}function u(){var P=J();if(!P){return false}s.getJSON("https://typekit.com/api/v1/json/kits/"+P+"/published?callback=?",function(Q){if(!Q.errors){var R=[];s.each(Q.kit.families,function(S,T){G.customFamilyMap[T.name]=T.css_names.join(",");R.push(T.name)});A(R,"typekit.com")}})}function c(P){var S="http://"+P+"/favicon.ico",Q=s("#ff-badges"),R=Q.find("[src='"+S+"']");if(!R.length){s("<img />",{src:S}).appendTo(Q)}}function A(V,Q){var P=s("#ff-font-family-custom"),T=s('<ul id="ff-font-family-custom" data-ff="fontFamily" class="ff-hidden"></ul>'),S="",R="Click to toggle between custom & stock font families",U=': <span class="ff-custom ff-active">Custom</span><span class="ff-stock">Stock</span>';s.each(V,function(W,X){S+="<li>"+X+"</li>"});if(typeof(Q)!==n){c(Q)}if(P.size()===1){P.append(S);return L()}S=T.append(S);s("#ff-font-family").append(S);s("#ff-font-family > h6").addClass("ff-clickable").attr("title",R).append(U).click(function(){var X=s(this),aa=X.hasClass("ff-custom")?true:false,ad=s("#ff-font-family-custom"),Z=s("#ff-font-family-sans, #ff-font-family-serif"),aa=!ad.is(":visible"),ab=X.children(),ac=100,Y,W;if(aa){Y=Z;W=ad}else{Y=ad;W=Z}ab.toggleClass("ff-active");Y.fadeOut(ac,function(){W.fadeIn(ac)})});L();s("#ff-font-family > h6").click()}if(G.customFamilies){A(G.customFamilies)}function C(P){if(!G.wfs){return false}if(!P){G.wfsName.text(G.wfsOriginalName);s("title").text(G.wfsTitle)}else{G.wfsName.text(P);s("title").text(G.wfsTitle.replace("Font name",P))}}function h(P){if(typeof(G.customFamilyMap[P])!==n){P=G.customFamilyMap[P]}return P+",monospace"}function L(){s("#ff-font-family li, #ff-font-face li").each(function(){var P=s(this);P.css("fontFamily",h(P.text()))});s("#ff-font-style li, #ff-text-transform li, #ff-font-variant li").each(function(){var Q=s(this),P=Q.parent().data("ff"),R=Q.text();Q.css(P,R)})}function q(R,Q){var P=new FileReader();P.name=Q;P.onloadend=function(S){v(S)};P.readAsDataURL(R)}function w(P){P=P.replace(/\..+$/,"").replace(/\W+/,"-").replace(/-|_/," ").replace(/^([a-z])|\s+([a-z])/g,function(Q){return Q.toUpperCase()});return r(P)}function r(P){return P.replace(/([a-z])([A-Z])/g,"$1 $2").replace(/\b([A-Z]+)([A-Z])([a-z])/,"$1 $2$3").replace(/^./,function(Q){return Q.toUpperCase()})}function g(P){var R=P.originalEvent.dataTransfer,Q=R.files,W=Q.length,S=/^.*\.(ttf|otf|woff)$/i;e(P);for(var V=0;V<W;V++){var T=Q[V],U=T.name,X;if(U.match(S)){X=w(U);q(T,X)}else{alert("Invalid file extension. Will only accept ttf, otf, or woff font files")}}}function v(Q){var P=Q.target.name,R=Q.target.result;var S=R.split("base64");if(S[0].indexOf("application/octet-stream")==-1){S[0]="data:application/octet-stream;base64";R=S[0]+S[1]}s("<style type='text/css'>@font-face{font-family: "+P+"; src:url("+R+");}</style> ").appendTo("head");A([P]);s("#ff-font-family-custom").find("li:last").click()}function e(P){P.stopPropagation();P.preventDefault()}function d(T){var P=T.length,S={},R=[],Q;for(Q=0;Q<P;Q+=1){S[T[Q]]=T[Q]}for(Q in S){R.push(S[Q])}return R}function k(){var P=s("#designer-plus");G.width=P.outerWidth();G.height=P.outerHeight();s("#ff-toggle").toggle(function(){P.removeClass("open").animate({height:16,width:16},100)},function(){P.addClass("open").animate({height:G.height,width:G.width},100)});s("#ff-drop ul > li").live("click",function(){if(s(this).children("input").length){return false}var S=s(this),U=S.parent().attr("data-ff"),V=S.text(),T=R();if(U=="fontFamily"){Q(V,T)}else{s(T).css(U,V)}});function R(){var T=s("#ff-drop ol input:checked").next(),S=T.text()||T.val();return S}function Q(T,S){S=S||R();C(T);T=h(T);s(S).css("fontFamily",T)}s("#ff-drop select").change(function(){var T=s(this).attr("data-ff"),U=parseFloat(s(this).find("option:selected").val()),S=R();s(S).css(T,U)});s("#ff-drop li.family-custom").unbind();s("#family-custom").keyup(function(T){var U=s("#family-custom").attr("value"),S=R();
if(T.keyCode==13){s("#family-custom-add").click()}else{Q(U,S)}e(T)});s("#ff-controls div").click(function(){if(s(this).hasClass("left")){s("#designer-plus").css({left:30,right:"auto"})}if(s(this).hasClass("right")){s("#designer-plus").css({right:30,left:"auto"})}if(s(this).hasClass("up")){s("#designer-plus").css({top:0,bottom:"auto"})}if(s(this).hasClass("down")){s("#designer-plus").css({bottom:0,top:"auto"})}});s("#ff-blah, #family-custom").each(function(S){s(this).attr("data-ff",s(this).attr("value"))}).click(function(){s(this).prev().attr("checked","checked");if(s(this).attr("value")==s(this).attr("data-ff")){s(this).removeAttr("value")}else{s(this).select()}});s("#ff-clear").click(function(){s("*").not("[data-ff=fontFamily]").removeAttr("style");L();C()});s("#family-custom-add").click(function(){var S=s(this).prev(),T=S.val();if(T!=="your font family"&&T!==""){A([T]);S.val("").select()}});s("#ff-font-drop").bind("dragover",e).bind("dragenter dragleave",function(S){s(this).toggleClass("dropzone");e(S)}).bind("drop",g)}function z(){var P=B.EYE=function(){var Q={init:[]};return{init:function(){console.log(s);s.each(Q.init,function(S,R){R.call()})},extend:function(S){for(var R in S){if(S[R]!=undefined){this[R]=S[R]}}},register:function(S,R){if(!Q[R]){Q[R]=[]}Q[R].push(S)}}}();s(P.init)}function K(){var P=function(){s(".colorSelector").ColorPicker({color:"#0000ff",onShow:function(Q){s(Q).fadeIn(500);return false},onHide:function(Q){s(Q).fadeOut(500);return false},onChange:function(Q,S,R){s("body").css("backgroundColor","#"+S)}})};EYE.register(P,"init")}function N(){var P=function(){var aH={},Q,aC=65,ah,aE='<div class="colorpicker"><div class="colorpicker_color"><div><div></div></div></div><div class="colorpicker_hue"><div></div></div><div class="colorpicker_new_color"></div><div class="colorpicker_current_color"></div><div class="colorpicker_hex"><input type="text" maxlength="6" size="6" /></div><div class="colorpicker_rgb_r colorpicker_field"><input type="text" maxlength="3" size="3" /><span></span></div><div class="colorpicker_rgb_g colorpicker_field"><input type="text" maxlength="3" size="3" /><span></span></div><div class="colorpicker_rgb_b colorpicker_field"><input type="text" maxlength="3" size="3" /><span></span></div><div class="colorpicker_hsb_h colorpicker_field"><input type="text" maxlength="3" size="3" /><span></span></div><div class="colorpicker_hsb_s colorpicker_field"><input type="text" maxlength="3" size="3" /><span></span></div><div class="colorpicker_hsb_b colorpicker_field"><input type="text" maxlength="3" size="3" /><span></span></div><div class="colorpicker_submit"></div></div>',ap={eventName:"click",onShow:function(){},onBeforeShow:function(){},onHide:function(){},onChange:function(){},onSubmit:function(){},color:"ff0000",livePreview:true,flat:false},ay=function(aI,aK){var aJ=X(aI);s(aK).data("colorpicker").fields.eq(1).val(aJ.r).end().eq(2).val(aJ.g).end().eq(3).val(aJ.b).end()},ai=function(aI,aJ){s(aJ).data("colorpicker").fields.eq(4).val(aI.h).end().eq(5).val(aI.s).end().eq(6).val(aI.b).end()},U=function(aI,aJ){s(aJ).data("colorpicker").fields.eq(0).val(aG(aI)).end()},Z=function(aI,aJ){s(aJ).data("colorpicker").selector.css("backgroundColor","#"+aG({h:aI.h,s:100,b:100}));s(aJ).data("colorpicker").selectorIndic.css({left:parseInt(150*aI.s/100,10),top:parseInt(150*(100-aI.b)/100,10)})},av=function(aI,aJ){s(aJ).data("colorpicker").hue.css("top",parseInt(150-150*aI.h/360,10))},V=function(aI,aJ){s(aJ).data("colorpicker").currentColor.css("backgroundColor","#"+aG(aI))},at=function(aI,aJ){s(aJ).data("colorpicker").newColor.css("backgroundColor","#"+aG(aI))},ab=function(aI){var aK=aI.charCode||aI.keyCode||-1;if((aK>aC&&aK<=90)||aK==32){return false}var aJ=s(this).parent().parent();if(aJ.data("colorpicker").livePreview===true){S.apply(this)}},S=function(aJ){var aK=s(this).parent().parent(),aI;if(this.parentNode.className.indexOf("_hex")>0){aK.data("colorpicker").color=aI=aa(am(this.value))}else{if(this.parentNode.className.indexOf("_hsb")>0){aK.data("colorpicker").color=aI=T({h:parseInt(aK.data("colorpicker").fields.eq(4).val(),10),s:parseInt(aK.data("colorpicker").fields.eq(5).val(),10),b:parseInt(aK.data("colorpicker").fields.eq(6).val(),10)})
}else{aK.data("colorpicker").color=aI=W(aB({r:parseInt(aK.data("colorpicker").fields.eq(1).val(),10),g:parseInt(aK.data("colorpicker").fields.eq(2).val(),10),b:parseInt(aK.data("colorpicker").fields.eq(3).val(),10)}))}}if(aJ){ay(aI,aK.get(0));U(aI,aK.get(0));ai(aI,aK.get(0))}Z(aI,aK.get(0));av(aI,aK.get(0));at(aI,aK.get(0));aK.data("colorpicker").onChange.apply(aK,[aI,aG(aI),X(aI)])},ac=function(aI){var aJ=s(this).parent().parent();aJ.data("colorpicker").fields.parent().removeClass("colorpicker_focus")},az=function(){aC=this.parentNode.className.indexOf("_hex")>0?70:65;s(this).parent().parent().data("colorpicker").fields.parent().removeClass("colorpicker_focus");s(this).parent().addClass("colorpicker_focus")},ax=function(aI){var aK=s(this).parent().find("input").focus();var aJ={el:s(this).parent().addClass("colorpicker_slider"),max:this.parentNode.className.indexOf("_hsb_h")>0?360:(this.parentNode.className.indexOf("_hsb")>0?100:255),y:aI.pageY,field:aK,val:parseInt(aK.val(),10),preview:s(this).parent().parent().data("colorpicker").livePreview};s(f).bind("mouseup",aJ,ag);s(f).bind("mousemove",aJ,aA)},aA=function(aI){aI.data.field.val(Math.max(0,Math.min(aI.data.max,parseInt(aI.data.val+aI.pageY-aI.data.y,10))));if(aI.data.preview){S.apply(aI.data.field.get(0),[true])}return false},ag=function(aI){S.apply(aI.data.field.get(0),[true]);aI.data.el.removeClass("colorpicker_slider").find("input").focus();s(f).unbind("mouseup",ag);s(f).unbind("mousemove",aA);return false},ak=function(aI){var aJ={cal:s(this).parent(),y:s(this).offset().top};aJ.preview=aJ.cal.data("colorpicker").livePreview;s(f).bind("mouseup",aJ,af);s(f).bind("mousemove",aJ,Y)},Y=function(aI){S.apply(aI.data.cal.data("colorpicker").fields.eq(4).val(parseInt(360*(150-Math.max(0,Math.min(150,(aI.pageY-aI.data.y))))/150,10)).get(0),[aI.data.preview]);return false},af=function(aI){ay(aI.data.cal.data("colorpicker").color,aI.data.cal.get(0));U(aI.data.cal.data("colorpicker").color,aI.data.cal.get(0));s(f).unbind("mouseup",af);s(f).unbind("mousemove",Y);return false},al=function(aI){var aJ={cal:s(this).parent(),pos:s(this).offset()};aJ.preview=aJ.cal.data("colorpicker").livePreview;s(f).bind("mouseup",aJ,ao);s(f).bind("mousemove",aJ,ae)},ae=function(aI){S.apply(aI.data.cal.data("colorpicker").fields.eq(6).val(parseInt(100*(150-Math.max(0,Math.min(150,(aI.pageY-aI.data.pos.top))))/150,10)).end().eq(5).val(parseInt(100*(Math.max(0,Math.min(150,(aI.pageX-aI.data.pos.left))))/150,10)).get(0),[aI.data.preview]);return false},ao=function(aI){ay(aI.data.cal.data("colorpicker").color,aI.data.cal.get(0));U(aI.data.cal.data("colorpicker").color,aI.data.cal.get(0));s(f).unbind("mouseup",ao);s(f).unbind("mousemove",ae);return false},aj=function(aI){s(this).addClass("colorpicker_focus")},aF=function(aI){s(this).removeClass("colorpicker_focus")},ad=function(aJ){var aK=s(this).parent();var aI=aK.data("colorpicker").color;aK.data("colorpicker").origColor=aI;V(aI,aK.get(0));aK.data("colorpicker").onSubmit(aI,aG(aI),X(aI),aK.data("colorpicker").el)},ar=function(aI){var aM=s("#"+s(this).data("colorpickerId"));aM.data("colorpicker").onBeforeShow.apply(this,[aM.get(0)]);var aN=s(this).offset();var aL=an();var aK=aN.top+this.offsetHeight;var aJ=aN.left;if(aK+176>aL.t+aL.h){aK-=this.offsetHeight+176}if(aJ+356>aL.l+aL.w){aJ-=356}aM.css({left:aJ+"px",top:aK+"px"});if(aM.data("colorpicker").onShow.apply(this,[aM.get(0)])!=false){aM.show()}s(f).bind("mousedown",{cal:aM},aD);return false},aD=function(aI){if(!aw(aI.data.cal.get(0),aI.target,aI.data.cal.get(0))){if(aI.data.cal.data("colorpicker").onHide.apply(this,[aI.data.cal.get(0)])!=false){aI.data.cal.hide()}s(f).unbind("mousedown",aD)}},aw=function(aK,aJ,aI){if(aK==aJ){return true}if(aK.contains){return aK.contains(aJ)}if(aK.compareDocumentPosition){return !!(aK.compareDocumentPosition(aJ)&16)}var aL=aJ.parentNode;while(aL&&aL!=aI){if(aL==aK){return true}aL=aL.parentNode}return false},an=function(){var aI=f.compatMode=="CSS1Compat";return{l:B.pageXOffset||(aI?f.documentElement.scrollLeft:f.body.scrollLeft),t:B.pageYOffset||(aI?f.documentElement.scrollTop:f.body.scrollTop),w:B.innerWidth||(aI?f.documentElement.clientWidth:f.body.clientWidth),h:B.innerHeight||(aI?f.documentElement.clientHeight:f.body.clientHeight)}
},T=function(aI){return{h:Math.min(360,Math.max(0,aI.h)),s:Math.min(100,Math.max(0,aI.s)),b:Math.min(100,Math.max(0,aI.b))}},aB=function(aI){return{r:Math.min(255,Math.max(0,aI.r)),g:Math.min(255,Math.max(0,aI.g)),b:Math.min(255,Math.max(0,aI.b))}},am=function(aK){var aI=6-aK.length;if(aI>0){var aL=[];for(var aJ=0;aJ<aI;aJ++){aL.push("0")}aL.push(aK);aK=aL.join("")}return aK},R=function(aI){var aI=parseInt(((aI.indexOf("#")>-1)?aI.substring(1):aI),16);return{r:aI>>16,g:(aI&65280)>>8,b:(aI&255)}},aa=function(aI){return W(R(aI))},W=function(aK){var aJ={h:0,s:0,b:0};var aL=Math.min(aK.r,aK.g,aK.b);var aI=Math.max(aK.r,aK.g,aK.b);var aM=aI-aL;aJ.b=aI;aJ.s=aI!=0?255*aM/aI:0;if(aJ.s!=0){if(aK.r==aI){aJ.h=(aK.g-aK.b)/aM}else{if(aK.g==aI){aJ.h=2+(aK.b-aK.r)/aM}else{aJ.h=4+(aK.r-aK.g)/aM}}}else{aJ.h=-1}aJ.h*=60;if(aJ.h<0){aJ.h+=360}aJ.s*=100/255;aJ.b*=100/255;return aJ},X=function(aI){var aK={};var aO=Math.round(aI.h);var aN=Math.round(aI.s*255/100);var aJ=Math.round(aI.b*255/100);if(aN==0){aK.r=aK.g=aK.b=aJ}else{var aP=aJ;var aM=(255-aN)*aJ/255;var aL=(aP-aM)*(aO%60)/60;if(aO==360){aO=0}if(aO<60){aK.r=aP;aK.b=aM;aK.g=aM+aL}else{if(aO<120){aK.g=aP;aK.b=aM;aK.r=aP-aL}else{if(aO<180){aK.g=aP;aK.r=aM;aK.b=aM+aL}else{if(aO<240){aK.b=aP;aK.r=aM;aK.g=aP-aL}else{if(aO<300){aK.b=aP;aK.g=aM;aK.r=aM+aL}else{if(aO<360){aK.r=aP;aK.g=aM;aK.b=aP-aL}else{aK.r=0;aK.g=0;aK.b=0}}}}}}}return{r:Math.round(aK.r),g:Math.round(aK.g),b:Math.round(aK.b)}},aq=function(aI){var aJ=[aI.r.toString(16),aI.g.toString(16),aI.b.toString(16)];s.each(aJ,function(aK,aL){if(aL.length==1){aJ[aK]="0"+aL}});return aJ.join("")},aG=function(aI){return aq(X(aI))},au=function(){var aJ=s(this).parent();var aI=aJ.data("colorpicker").origColor;aJ.data("colorpicker").color=aI;ay(aI,aJ.get(0));U(aI,aJ.get(0));ai(aI,aJ.get(0));Z(aI,aJ.get(0));av(aI,aJ.get(0));at(aI,aJ.get(0))};return{init:function(aI){aI=s.extend({},ap,aI||{});if(typeof aI.color=="string"){aI.color=aa(aI.color)}else{if(aI.color.r!=undefined&&aI.color.g!=undefined&&aI.color.b!=undefined){aI.color=W(aI.color)}else{if(aI.color.h!=undefined&&aI.color.s!=undefined&&aI.color.b!=undefined){aI.color=T(aI.color)}else{return this}}}return this.each(function(){if(!s(this).data("colorpickerId")){var aJ=s.extend({},aI);aJ.origColor=aI.color;var aL="collorpicker_"+parseInt(Math.random()*1000);s(this).data("colorpickerId",aL);var aK=s(aE).attr("id",aL);alert(aK);if(aJ.flat){aK.appendTo(this).show()}else{aK.appendTo(f.body)}aJ.fields=aK.find("input").bind("keyup",ab).bind("change",S).bind("blur",ac).bind("focus",az);aK.find("span").bind("mousedown",ax).end().find(">div.colorpicker_current_color").bind("click",au);aJ.selector=aK.find("div.colorpicker_color").bind("mousedown",al);aJ.selectorIndic=aJ.selector.find("div div");aJ.el=this;aJ.hue=aK.find("div.colorpicker_hue div");aK.find("div.colorpicker_hue").bind("mousedown",ak);aJ.newColor=aK.find("div.colorpicker_new_color");aJ.currentColor=aK.find("div.colorpicker_current_color");aK.data("colorpicker",aJ);aK.find("div.colorpicker_submit").bind("mouseenter",aj).bind("mouseleave",aF).bind("click",ad);ay(aJ.color,aK.get(0));ai(aJ.color,aK.get(0));U(aJ.color,aK.get(0));av(aJ.color,aK.get(0));Z(aJ.color,aK.get(0));V(aJ.color,aK.get(0));at(aJ.color,aK.get(0));if(aJ.flat){aK.css({position:"relative",display:"block"})}else{s(this).bind(aJ.eventName,ar)}}})},showPicker:function(){return this.each(function(){if(s(this).data("colorpickerId")){ar.apply(this)}})},hidePicker:function(){return this.each(function(){if(s(this).data("colorpickerId")){s("#"+s(this).data("colorpickerId")).hide()}})},setColor:function(aI){if(typeof aI=="string"){aI=aa(aI)}else{if(aI.r!=undefined&&aI.g!=undefined&&aI.b!=undefined){aI=W(aI)}else{if(aI.h!=undefined&&aI.s!=undefined&&aI.b!=undefined){aI=T(aI)}else{return this}}}return this.each(function(){if(s(this).data("colorpickerId")){var aJ=s("#"+s(this).data("colorpickerId"));aJ.data("colorpicker").color=aI;aJ.data("colorpicker").origColor=aI;ay(aI,aJ.get(0));ai(aI,aJ.get(0));
U(aI,aJ.get(0));av(aI,aJ.get(0));Z(aI,aJ.get(0));V(aI,aJ.get(0));at(aI,aJ.get(0))}})}}}();console.log(P);s.fn.extend({ColorPicker:P.init,ColorPickerHide:P.hidePicker,ColorPickerShow:P.showPicker,ColorPickerSetColor:P.setColor});z();K()}}(this,this.document));