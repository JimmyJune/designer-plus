/*!
 * Waves Designer+ 0.1
 *
 * Copyright (c) 2012 Danny Casady
 * Licensed under the MIT license
 *
 * Uses some code from Stefan Petre's color picker
 * Dual licensed under the MIT and GPL licenses
 *
 * Uses some code from (c) 2009-12 Matt Wiebe's font-friend
 * Licensed under the MIT license
 *
 * Uses some code from (c) 2009-10 Ryan Seddon's font dragr
 * Licensed under the MIT license
 *
*/
(function(B,f){var t,n,g,o="undefined",G={version:"0.1",css:"#designer-plus{overflow:hidden;position:fixed;bottom:0;left:30px;background-color:#fff;background-color:rgba(255,255,255,0.93);width:740px;color:#222;-webkit-box-shadow:1px 1px 5px rgba(0,0,0,.3);-moz-box-shadow:1px 1px 5px rgba(0,0,0,.3);box-shadow:1px 1px 5px rgba(0,0,0,.3);z-index:10000;text-align:left;height:400px}#designer-plus,#ff-drop h6,#ff-drop li{line-height:1.5!important}#ff-drop{padding:12px 12px 12px 36px}#ff-toggle{background-color:#222;color:#eee;display:block;width:12px;height:16px;padding:0 1px 0 3px;position:absolute;top:0;left:0;font-size:16px;line-height:1!important;cursor:pointer;z-index:10001;-moz-transition:.25s all ease-in-out;-webkit-transition:.25s all ease-in-out;-o-transition:.25s all ease-in-out;transition:.25s all ease-in-out}#ff-toggle sup{font-size:13px;line-height:1!important;vertical-align:super;display:none}.open #ff-toggle sup{display:inline}#ff-toggle:hover{color:#fff;background-color:#555}.open #ff-toggle{width:auto;height:32px;font-size:32px;padding:0 3px}#ff-drop form{background:0;color:inherit;float:none}#ff-drop h6{font-size:13px;border-bottom:1px solid #aaa;margin:0 0 6px!important;padding:0!important;text-indent:0!important;float:none!important;height:1.5em!important;white-space:nowrap}#ff-drop>div{float:left;width:120px;padding-right:20px;margin:0!important;position:relative}#ff-drop>div.wrap>div{margin-bottom:12px;font-size:11px!important;position:relative}#ff-drop div#ff-selector{width:130px}#ff-drop div#ff-font-family{width:240px}#ff-selector p{font-size:9px!important;line-height:1.2!important;margin:1em 0 0!important;padding:0!important}#ff-controls{position:absolute!important;bottom:60px;left:65px;width:55px!important;height:60px;margin:0!important;padding:0!important}#ff-controls div{position:absolute;font-size:20px;width:1em;height:1em;color:#555;min-width:inherit!important;min-height:inherit!important;padding:0;margin:0;float:none;text-align:center}#ff-controls>div,.ff-toggler>span,#family-custom-add{font-family:sans-serif!important;font-weight:normal!important;-webkit-user-select:none;-moz-user-select:none;user-select:none;cursor:pointer}#ff-controls div:hover{color:#000}#ff-controls .up{left:1em;top:0}#ff-controls .down{left:1em;bottom:0}#ff-controls .left{left:0;top:1em}#ff-controls .right{right:-.25em;top:1em}#ff-drop #ff-font-family ul{float:left;width:110px;padding-right:5px}#ff-drop #ff-font-family ul#ff-font-family-sans{padding-right:10px;width:115px}#ff-drop ol li{list-style:none outside}#ff-drop ol,#ff-drop ul{margin:0;padding:0}#ff-drop li{font-size:11px!important; margin:0!important;padding:0!important;list-style:none outside none!important;text-indent:0!important;height:auto!important}#ff-drop li.core{margin-bottom:4px!important;padding:0!important}#ff-drop ul li:hover{cursor:pointer;background-color:#e6e6e6!important}#ff-drop ul li.family-custom{margin:12px 0 0!important}#ff-drop ul li.family-custom:hover{cursor:default;background:none!important}#family-custom-add{display:inline-block;color:#aaa;line-height:1!important;font-size:15px!important;color:#666!important;vertical-align:top;padding:1px 3px 3px}#family-custom-add:hover,#family-custom-add:focus{background-color:#555!important;color:#fff!important}#family-custom{width:85px}#ff-drop ol input[type=radio]{margin-left:-5px;width:auto!important}#ff-blah{width:100px;margin-left:5px}#ff-drop ol label{margin-left:5px;display:inline!important}#ff-drop>#ff-credit{position:absolute;bottom:21px;left:32px;font-size:9px;margin:0!important}#designer-plus a{color:#4c0003!important;text-decoration:underline!important;border:0!important}#designer-plus a:hover{color:#a60007!important}#ff-drop>#ff-clear{position:absolute;bottom:0;right:0;padding:5px 5px 0!important;text-decoration:line-through;opacity:.1;font-size:21px;margin:0!important;width:auto!important}#ff-clear:hover{opacity:1;cursor:pointer}#ff-font-drop{font-size:11px!important;background-color:#e6e6e6;padding:15px 0;text-align:center;border:1px solid #aaa;margin-bottom:6px}#ff-font-drop.dropzone{background-color:#fff;border-color:#111}#ff-drop select{width:105px!important;margin-left:15px!important}#ff-google-webfonts select{width:99%!important;margin:0!important}#ff-drop select option{font-size:10px!important}#ff-drop .ff-hidden{display:none}#ff-drop .ff-clickable{cursor:pointer;position:relative;z-index:2}#ff-font-family h6 span{text-transform:uppercase!important;font-size:75%;font-weight:normal!important;color:#111!important;letter-spacing:.02em;line-height:1;display:inline-block}#ff-font-family h6 .ff-active{color:#aaa!important}#ff-font-family .ff-custom{padding:0 6px;border-right:1px solid #bbb;margin-right:6px}#ff-badges{position:absolute;right:14px;top:0;z-index:14px}#ff-badges>img{padding:0 4px 0 0!important;margin:0!important;border:0!important;width:16px!important;height:16px!important}#ff-drop #ff-font-family #ff-font-family-custom{width:100%;-webkit-column-count:2;-moz-column-count:2;column-count:2;-webkit-column-gap:12px;-moz-column-gap:12px;column-gap:12px}.ff-toggler{position:absolute;height:20px;top:27px;left:-4px}.ff-toggler span{position:absolute;display:block;left:0;top:0;height:8px;width:8px;line-height:1!important;font-size:8px!important;text-align:center;color:#aaa!important;padding:2px 4px!important}.ff-toggler span:hover{color:#333!important}.ff-toggler span.ff-down{top:auto;bottom:0}#ff-drop [data-ff=fontFamily] li{height:1.5em!important;overflow:hidden;text-overflow:ellipsis}.colorpicker{width:356px;height:176px;overflow:hidden;position:absolute;background:url(https://raw.github.com/dpcasady/designer-plus/master/images/colorpicker_background.png);font-family:Arial,Helvetica,sans-serif;display:none;z-index:11000}.colorpicker_color{width:150px;height:150px;left:14px;top:13px;position:absolute;background:#f00;overflow:hidden;cursor:crosshair}.colorpicker_color div{position:absolute;top:0;left:0;width:150px;height:150px;background:url(https://raw.github.com/dpcasady/designer-plus/master/images/colorpicker_overlay.png)}.colorpicker_color div div{position:absolute;top:0;left:0;width:11px;height:11px;overflow:hidden;background:url(https://raw.github.com/dpcasady/designer-plus/master/images/colorpicker_select.gif);margin:-5px 0 0 -5px}.colorpicker_hue{position:absolute;top:13px;left:171px;width:35px;height:150px;cursor:n-resize}.colorpicker_hue div{position:absolute;width:35px;height:9px;overflow:hidden;background:url(https://raw.github.com/dpcasady/designer-plus/master/images/colorpicker_indic.gif) left top;margin:-4px 0 0 0;left:0}.colorpicker_new_color{position:absolute;width:60px;height:30px;left:213px;top:13px;background:#f00}.colorpicker_current_color{position:absolute;width:60px;height:30px;left:283px;top:13px;background:#f00}.colorpicker input{background-color:transparent;border:1px solid transparent;position:absolute;font-size:10px;font-family:Arial,Helvetica,sans-serif;color:#898989;top:4px;right:11px;text-align:right;margin:0;padding:0;height:11px}.colorpicker_hex{position:absolute;width:72px;height:22px;background:url(https://raw.github.com/dpcasady/designer-plus/master/images/colorpicker_hex.png) top;left:212px;top:142px}.colorpicker_hex input{right:6px}.colorpicker_field{height:22px;width:62px;background-position:top;position:absolute}.colorpicker_field span{position:absolute;width:12px;height:22px;overflow:hidden;top:0;right:0;cursor:n-resize}.colorpicker_rgb_r{background-image:url(https://raw.github.com/dpcasady/designer-plus/master/images/colorpicker_rgb_r.png);top:52px;left:212px}.colorpicker_rgb_g{background-image:url(https://raw.github.com/dpcasady/designer-plus/master/images/colorpicker_rgb_g.png);top:82px;left:212px}.colorpicker_rgb_b{background-image:url(https://raw.github.com/dpcasady/designer-plus/master/images/colorpicker_rgb_b.png);top:112px;left:212px}.colorpicker_hsb_h{background-image:url(https://raw.github.com/dpcasady/designer-plus/master/images/colorpicker_hsb_h.png);top:52px;left:282px}.colorpicker_hsb_s{background-image:url(https://raw.github.com/dpcasady/designer-plus/master/images/colorpicker_hsb_s.png);top:82px;left:282px}.colorpicker_hsb_b{background-image:url(https://raw.github.com/dpcasady/designer-plus/master/images/colorpicker_hsb_b.png);top:112px;left:282px}.colorpicker_submit{position:absolute;width:22px;height:22px;background:url(https://raw.github.com/dpcasady/designer-plus/master/images/colorpicker_submit.png) top;left:322px;top:142px;overflow:hidden}.colorpicker_focus{background-position:center}.colorpicker_hex.colorpicker_focus{background-position:bottom}.colorpicker_submit.colorpicker_focus{background-position:bottom}.colorpicker_slider{background-position:bottom}.colorSelector{position:relative;width:36px;height:36px;background:url(https://raw.github.com/dpcasady/designer-plus/master/images/select.png)}.colorSelector div{position:absolute;top:3px;left:3px;width:30px;height:30px;background:url(https://raw.github.com/dpcasady/designer-plus/master/images/select.png) center}",html:'<div id="ff-drop"><span id="ff-toggle">D<sup>+</sup></span><div id="ff-selector"><h6>Selector</h6><form action="" method="get"><ol><li><input type="radio" name="jq-select" checked="checked" id="jq1"><label for="jq1">body</label></li><li><input type="radio" name="jq-select" id="jq2"><label for="jq2">h1,h2,h3,h4,h5,h6</label></li><li><input type="radio" name="jq-select" id="jq3"><label for="jq3">p</label></li><li><input type="radio" name="jq-select" id="jq4"><input type="text" name="ff-blah" value="roll your own" id="ff-blah"></li></ol></form><p>Roll your own selector using <a href="http://api.jquery.com/category/selectors/">jQuery selectors</a>.</p><p></p><h6>Font Color</h6><p></p><h6>Background Color</h6><p><input type="text" maxlength="6" size="6" class="colorSelector background" value="00ff00"></p><div class="colorSelector background"><div style="background-color: #0000ff"></div></div></div><div id="ff-font-family"><h6>Font Family</h6><div id="ff-badges"></div><ul id="ff-font-family-sans" data-ff="fontFamily"><li>Arial</li><li>Verdana</li><li>Tahoma</li><li class="core">Trebuchet MS</li><li>Helvetica</li><li>Helvetica Neue</li><li>Gill Sans</li><li>Century Gothic</li><li>Lucida Grande</li><li>Lucida Sans Unicode</li><li>Calibri</li><li>Corbel</li><li>Candara</li></ul><ul id="ff-font-family-serif" data-ff="fontFamily"><li>Times New Roman</li><li class="core">Georgia</li><li>Times</li><li>Palatino</li><li>Palatino Linotype</li><li>Baskerville</li><li>Hoefler Text</li><li>Garamond</li><li>Constantia</li><li>Cambria</li><li class="family-custom"><input type="text" name="family-custom" value="your font family" id="family-custom"><span id="family-custom-add">+</span></li></ul></div><div class="wrap"><div id="ff-google-webfonts"><h6>Google Web Fonts</h6><div>Loading…</div></div><div id="ff-font-size"><h6>Font Size</h6><select data-ff="fontSize"><option>10</option><option>11</option><option>12</option><option>14</option><option>16</option><option>18</option><option>21</option><option>24</option><option>36</option><option>48</option><option>60</option><option>72</option></select></div><div id="ff-font-weight"><h6>Font Weight</h6><select data-ff="fontWeight"><option>100</option><option>200</option><option>300</option><option value="400" selected>400 (normal)</option><option>500</option><option>600</option><option value="700">700 (bold)</option><option>800</option><option>900</option></select></div><div id="ff-line-height"><h6>Line Height</h6><select data-ff="lineHeight"><option>1</option><option>1.1</option><option>1.2</option><option>1.3</option><option>1.4</option><option selected>1.5</option><option>1.6</option><option>1.75</option><option>2</option><option>2.5</option><option>3</option></select></div><div id="ff-font-style"><h6>Font Style</h6><ul data-ff="fontStyle"><li>italic</li><li>normal</li></ul></div></div><div class="wrap"><div id="ff-font-face"><h6>@font-face</h6><div id="ff-font-drop">Drag a font here.</div><ul data-ff="fontFamily"></ul></div><div id="ff-text-transform"><h6>Text Transform</h6><ul data-ff="textTransform"><li>uppercase</li><li>lowercase</li><li>capitalize</li><li>none</li></ul></div><div id="ff-font-variant"><h6>Font Variant</h6><ul data-ff="fontVariant"><li>small-caps</li><li>normal</li></ul></div></div><div id="ff-controls"><div class="left">&larr;</div><div class="right">&rarr;</div><div class="up">&uarr;</div><div class="down">&darr;</div></div><div id="ff-credit">Waves Designer+</div><div id="ff-clear" title="clear all styles">D<sup>+</sup></div></div>',customFamiles:false,customFamilyMap:[],googleFamilies:{},existingGoogleFamilies:[]};
function a(){if(typeof(B.jQuery)===o){var P=f.createElement("script");P.src="http://ajax.googleapis.com/ajax/libs/jquery/1.6.2/jquery.min.js";f.getElementsByTagName("head")[0].appendChild(P);g=setInterval(I,100)}else{M()}}a();function I(){if(typeof(B.jQuery)!==o){clearInterval(g);M()}}function M(){t=B.jQuery;if(t("#designer-plus").size()!==0){return false}n=t("body");t("head").append('<style id="designer-plus-stylesheet" type="text/css" media="screen">'+G.css+"</style>");n.append("<div id='designer-plus'></div>");t("#designer-plus").html(G.html).addClass("open");t("#ff-credit").append("<span> "+G.version+"</span>");l();m();k();L();u();O();H();N()}function H(){var P="https://www.googleapis.com/webfonts/v1/webfonts?key=AIzaSyBUK3PeqSEzwPNIyg94dBQpziFOPvm7-aA",R=[],S=function(T){if(T.kind==="webfonts#webfontList"){t.each(T.items,function(U,V){if(t.inArray(V.family,G.existingGoogleFamilies)!==-1){V.family="✓ "+V.family}else{G.googleFamilies[V.family]=V.variants}R.push(V.family)});y(R)}else{Q()}},Q=function(){t("#ff-google-webfonts > div").html("Error loading webfonts. :(");setTimeout(function(){t("#ff-google-webfonts").fadeOut()},3500)};t.ajax({url:P,type:"GET",dataType:"jsonp",success:S,error:Q})}function y(Q){var P=['<option value="0">Choose:</option>'],Q;t.each(Q,function(S,R){P.push("<option>"+R+"</option>")});Q=t("<select>"+P.join("")+"</select>");Q.change(j);t("#ff-google-webfonts > div").html(Q)}function j(){var Q=t(this),U=Q.val(),P=U.replace(/ /g,"+"),S="http://fonts.googleapis.com/css?family=",T,R;if(U==="0"||!G.googleFamilies[U]){return}T=":"+G.googleFamilies[U].join(",");R=S+P+T;t('<link rel="stylesheet" type="text/css" href="'+R+'" >').appendTo("head");A([U],"www.google.com");Q.find(":selected").text("✓ "+U);t("#ff-font-family-custom").find("li:last").click();delete G.googleFamilies[U]}function O(){F();v();E();D()}function F(){var P=f.styleSheets||[],Q=[];t.each(P,function(R,T){try{t.each(T.cssRules,function(V,W){if(W.type===CSSRule.FONT_FACE_RULE){var U=W.style.getPropertyValue("font-family");if(U){U=U.replace(/^"|'/,"").replace(/"|'$/,"");if(U!=="testfont"){Q.push(U)}}}})}catch(S){}});if(Q.length>0){A(d(Q))}}function m(){if(typeof(designerPlusFamilies)!==o){G.customFamilies=designerPlusFamilies;if(!t.isArray(G.customFamilies)){var P=[];t.each(G.customFamilies,function(Q,R){P.push(Q)});G.customFamilies=P;G.customFamilyMap=designerPlusFamilies}}else{if(n.attr("data-ff-families")){G.customFamilies=n.attr("data-ff-families").split(",")}}}function u(){G.wfs=(B.location.href=="http://webfontspecimen.com/demo/");G.wfsName=(G.wfs)?t("h1, .bodysize tr:first-child th:first-child"):false;if(!G.wfs&&t("body").attr("id")=="Waves-web-font-specimen"){G.wfs=true;G.wfsName=t("h1, .bodysize tr:first-child th.base")}if(G.wfs){G.wfsOriginalName=t("h1").text();G.wfsTitle=t("title").text()}}function k(){t("#designer-plus").find("select").each(function(P){var Q=t('<span class="ff-toggler"><span class="ff-up" title="Increase">&#9650;</span><span class="ff-down" title="Decrease">&#9660;</span></span>');Q.insertBefore(this)});t(".ff-toggler span").click(p)}function p(Q){var P=t(this),U=Q.target.className=="ff-up",T=P.parent().next(),R=T.find(":selected"),S;S=(U)?R.next():R.prev();if(S.size()==0){S=(U)?T.find(":first"):T.find(":last")}S.attr("selected","selected");T.trigger("change")}function D(){var P=q(),Q;if(!P){return}t.getJSON("http://www.typotheque.com/ajax/webfont_api.php?key="+P,function(R){console.log(R)})}function q(){var P=false;t('link[href*="wf.typotheque.com"]').each(function(){P=t(this).attr("href").split("/").pop();return false});return P}function E(){var P=b(),R,Q=[];if(!P){return}R=P.split("family=").pop();t.each(R.split("|"),function(T,S){Q.push(S.split(":")[0].replace("+"," "))});if(Q.length>0){A(Q,"www.google.com");G.existingGoogleFamilies=Q}}function b(){var P=false;t('link[href*="fonts.googleapis.com"]').each(function(){P=t(this).attr("href");return false});return P}function J(){var P=null;t("script").each(function(R){var Q=this.src.match(/use\.typekit\.com\/(.+)\.js/);
if(Q){P=Q[1];return false}});return P}function v(){var P=J();if(!P){return false}t.getJSON("https://typekit.com/api/v1/json/kits/"+P+"/published?callback=?",function(Q){if(!Q.errors){var R=[];t.each(Q.kit.families,function(S,T){G.customFamilyMap[T.name]=T.css_names.join(",");R.push(T.name)});A(R,"typekit.com")}})}function c(P){var S="http://"+P+"/favicon.ico",Q=t("#ff-badges"),R=Q.find("[src='"+S+"']");if(!R.length){t("<img />",{src:S}).appendTo(Q)}}function A(V,Q){var P=t("#ff-font-family-custom"),T=t('<ul id="ff-font-family-custom" data-ff="fontFamily" class="ff-hidden"></ul>'),S="",R="Click to toggle between custom & stock font families",U=': <span class="ff-custom ff-active">Custom</span><span class="ff-stock">Stock</span>';t.each(V,function(W,X){S+="<li>"+X+"</li>"});if(typeof(Q)!==o){c(Q)}if(P.size()===1){P.append(S);return L()}S=T.append(S);t("#ff-font-family").append(S);t("#ff-font-family > h6").addClass("ff-clickable").attr("title",R).append(U).click(function(){var X=t(this),aa=X.hasClass("ff-custom")?true:false,ad=t("#ff-font-family-custom"),Z=t("#ff-font-family-sans, #ff-font-family-serif"),aa=!ad.is(":visible"),ab=X.children(),ac=100,Y,W;if(aa){Y=Z;W=ad}else{Y=ad;W=Z}ab.toggleClass("ff-active");Y.fadeOut(ac,function(){W.fadeIn(ac)})});L();t("#ff-font-family > h6").click()}if(G.customFamilies){A(G.customFamilies)}function C(P){if(!G.wfs){return false}if(!P){G.wfsName.text(G.wfsOriginalName);t("title").text(G.wfsTitle)}else{G.wfsName.text(P);t("title").text(G.wfsTitle.replace("Font name",P))}}function i(P){if(typeof(G.customFamilyMap[P])!==o){P=G.customFamilyMap[P]}return P+",monospace"}function L(){t("#ff-font-family li, #ff-font-face li").each(function(){var P=t(this);P.css("fontFamily",i(P.text()))});t("#ff-font-style li, #ff-text-transform li, #ff-font-variant li").each(function(){var Q=t(this),P=Q.parent().data("ff"),R=Q.text();Q.css(P,R)})}function r(R,Q){var P=new FileReader();P.name=Q;P.onloadend=function(S){w(S)};P.readAsDataURL(R)}function x(P){P=P.replace(/\..+$/,"").replace(/\W+/,"-").replace(/-|_/," ").replace(/^([a-z])|\s+([a-z])/g,function(Q){return Q.toUpperCase()});return s(P)}function s(P){return P.replace(/([a-z])([A-Z])/g,"$1 $2").replace(/\b([A-Z]+)([A-Z])([a-z])/,"$1 $2$3").replace(/^./,function(Q){return Q.toUpperCase()})}function h(P){var R=P.originalEvent.dataTransfer,Q=R.files,W=Q.length,S=/^.*\.(ttf|otf|woff)$/i;e(P);for(var V=0;V<W;V++){var T=Q[V],U=T.name,X;if(U.match(S)){X=x(U);r(T,X)}else{alert("Invalid file extension. Will only accept ttf, otf, or woff font files")}}}function w(Q){var P=Q.target.name,R=Q.target.result;var S=R.split("base64");if(S[0].indexOf("application/octet-stream")==-1){S[0]="data:application/octet-stream;base64";R=S[0]+S[1]}t("<style type='text/css'>@font-face{font-family: "+P+"; src:url("+R+");}</style> ").appendTo("head");A([P]);t("#ff-font-family-custom").find("li:last").click()}function e(P){P.stopPropagation();P.preventDefault()}function d(T){var P=T.length,S={},R=[],Q;for(Q=0;Q<P;Q+=1){S[T[Q]]=T[Q]}for(Q in S){R.push(S[Q])}return R}function l(){var P=t("#designer-plus");G.width=P.outerWidth();G.height=P.outerHeight();t("#ff-toggle").toggle(function(){P.removeClass("open").animate({height:16,width:16},100)},function(){P.addClass("open").animate({height:G.height,width:G.width},100)});t("#ff-drop ul > li").live("click",function(){if(t(this).children("input").length){return false}var S=t(this),U=S.parent().attr("data-ff"),V=S.text(),T=R();if(U=="fontFamily"){Q(V,T)}else{t(T).css(U,V)}});function R(){var T=t("#ff-drop ol input:checked").next(),S=T.text()||T.val();return S}function Q(T,S){S=S||R();C(T);T=i(T);t(S).css("fontFamily",T)}t("#ff-drop select").change(function(){var T=t(this).attr("data-ff"),U=parseFloat(t(this).find("option:selected").val()),S=R();t(S).css(T,U)});t("#ff-drop li.family-custom").unbind();t("#family-custom").keyup(function(T){var U=t("#family-custom").attr("value"),S=R();if(T.keyCode==13){t("#family-custom-add").click()}else{Q(U,S)}e(T)});t("#ff-controls div").click(function(){if(t(this).hasClass("left")){t("#designer-plus").css({left:30,right:"auto"})
}if(t(this).hasClass("right")){t("#designer-plus").css({right:30,left:"auto"})}if(t(this).hasClass("up")){t("#designer-plus").css({top:0,bottom:"auto"})}if(t(this).hasClass("down")){t("#designer-plus").css({bottom:0,top:"auto"})}});t("#ff-blah, #family-custom").each(function(S){t(this).attr("data-ff",t(this).attr("value"))}).click(function(){t(this).prev().attr("checked","checked");if(t(this).attr("value")==t(this).attr("data-ff")){t(this).removeAttr("value")}else{t(this).select()}});t("#ff-clear").click(function(){t("*").not("[data-ff=fontFamily]").removeAttr("style");L();C()});t("#family-custom-add").click(function(){var S=t(this).prev(),T=S.val();if(T!=="your font family"&&T!==""){A([T]);S.val("").select()}});t("#ff-font-drop").bind("dragover",e).bind("dragenter dragleave",function(S){t(this).toggleClass("dropzone");e(S)}).bind("drop",h)}function K(){var Q=function(){t(".colorSelector.font").ColorPicker({color:"#0000ff",onShow:function(R){t(R).fadeIn(500);return false},onHide:function(R){t(R).fadeOut(500);return false},onChange:function(S,U,T,R){t(R).css("color","#"+U)}})};EYE.register(Q,"init");var P=function(){t(".colorSelector.background").ColorPicker({color:"#0000ff",onShow:function(R){t(R).fadeIn(500);return false},onHide:function(R){t(R).fadeOut(500);return false},onSubmit:function(R,U,S,T){t(T).val(U);t(T).ColorPickerHide()},onBeforeShow:function(){t(this).ColorPickerSetColor(this.value)},onChange:function(S,U,T,R){t(".test").val(U);t(R).css("backgroundColor","#"+U)}}).bind("keyup",function(R){console.log(R);t(this).ColorPickerSetColor(this.value);t("body").css("backgroundColor","#"+this.value)})};EYE.register(P,"init")}function z(){var P=B.EYE=function(){var Q={initialize:[]};return{initialize:function(){if(Q.init==undefined){K()}if(Q.init!=undefined){t.each(Q.init,function(R,S){S.call()})}},extend:function(S){for(var R in S){if(S[R]!=undefined){this[R]=S[R]}}},register:function(S,R){if(!Q[R]){Q[R]=[]}Q[R].push(S)}}}();K();t(P.initialize)}function N(){var P=function(){var aI={},Q,aD=65,ai,aF='<div class="colorpicker"><div class="colorpicker_color"><div><div></div></div></div><div class="colorpicker_hue"><div></div></div><div class="colorpicker_new_color"></div><div class="colorpicker_current_color"></div><div class="colorpicker_hex"><input type="text" maxlength="6" size="6" /></div><div class="colorpicker_rgb_r colorpicker_field"><input type="text" maxlength="3" size="3" /><span></span></div><div class="colorpicker_rgb_g colorpicker_field"><input type="text" maxlength="3" size="3" /><span></span></div><div class="colorpicker_rgb_b colorpicker_field"><input type="text" maxlength="3" size="3" /><span></span></div><div class="colorpicker_hsb_h colorpicker_field"><input type="text" maxlength="3" size="3" /><span></span></div><div class="colorpicker_hsb_s colorpicker_field"><input type="text" maxlength="3" size="3" /><span></span></div><div class="colorpicker_hsb_b colorpicker_field"><input type="text" maxlength="3" size="3" /><span></span></div><div class="colorpicker_submit"></div></div>',aq={eventName:"click",onShow:function(){},onBeforeShow:function(){},onHide:function(){},onChange:function(){},onSubmit:function(){},color:"ff0000",livePreview:true,flat:false},az=function(aJ,aL){var aK=X(aJ);t(aL).data("colorpicker").fields.eq(1).val(aK.r).end().eq(2).val(aK.g).end().eq(3).val(aK.b).end()},aj=function(aJ,aK){t(aK).data("colorpicker").fields.eq(4).val(aJ.h).end().eq(5).val(aJ.s).end().eq(6).val(aJ.b).end()},U=function(aJ,aK){t(aK).data("colorpicker").fields.eq(0).val(aH(aJ)).end()},aa=function(aJ,aK){t(aK).data("colorpicker").selector.css("backgroundColor","#"+aH({h:aJ.h,s:100,b:100}));t(aK).data("colorpicker").selectorIndic.css({left:parseInt(150*aJ.s/100,10),top:parseInt(150*(100-aJ.b)/100,10)})},aw=function(aJ,aK){t(aK).data("colorpicker").hue.css("top",parseInt(150-150*aJ.h/360,10))},V=function(aJ,aK){t(aK).data("colorpicker").currentColor.css("backgroundColor","#"+aH(aJ))},au=function(aJ,aK){t(aK).data("colorpicker").newColor.css("backgroundColor","#"+aH(aJ))
},ac=function(aJ){var aL=aJ.charCode||aJ.keyCode||-1;if((aL>aD&&aL<=90)||aL==32){return false}var aK=t(this).parent().parent();if(aK.data("colorpicker").livePreview===true){S.apply(this)}},S=function(aK){var aL=t(this).parent().parent(),aJ;if(this.parentNode.className.indexOf("_hex")>0){aL.data("colorpicker").color=aJ=ab(an(this.value))}else{if(this.parentNode.className.indexOf("_hsb")>0){aL.data("colorpicker").color=aJ=T({h:parseInt(aL.data("colorpicker").fields.eq(4).val(),10),s:parseInt(aL.data("colorpicker").fields.eq(5).val(),10),b:parseInt(aL.data("colorpicker").fields.eq(6).val(),10)})}else{aL.data("colorpicker").color=aJ=W(aC({r:parseInt(aL.data("colorpicker").fields.eq(1).val(),10),g:parseInt(aL.data("colorpicker").fields.eq(2).val(),10),b:parseInt(aL.data("colorpicker").fields.eq(3).val(),10)}))}}if(aK){az(aJ,aL.get(0));U(aJ,aL.get(0));aj(aJ,aL.get(0))}aa(aJ,aL.get(0));aw(aJ,aL.get(0));au(aJ,aL.get(0));aL.data("colorpicker").onChange.apply(aL,[aJ,aH(aJ),X(aJ),Z()])},ad=function(aJ){var aK=t(this).parent().parent();aK.data("colorpicker").fields.parent().removeClass("colorpicker_focus")},aA=function(){aD=this.parentNode.className.indexOf("_hex")>0?70:65;t(this).parent().parent().data("colorpicker").fields.parent().removeClass("colorpicker_focus");t(this).parent().addClass("colorpicker_focus")},ay=function(aJ){var aL=t(this).parent().find("input").focus();var aK={el:t(this).parent().addClass("colorpicker_slider"),max:this.parentNode.className.indexOf("_hsb_h")>0?360:(this.parentNode.className.indexOf("_hsb")>0?100:255),y:aJ.pageY,field:aL,val:parseInt(aL.val(),10),preview:t(this).parent().parent().data("colorpicker").livePreview};t(f).bind("mouseup",aK,ah);t(f).bind("mousemove",aK,aB)},aB=function(aJ){aJ.data.field.val(Math.max(0,Math.min(aJ.data.max,parseInt(aJ.data.val+aJ.pageY-aJ.data.y,10))));if(aJ.data.preview){S.apply(aJ.data.field.get(0),[true])}return false},ah=function(aJ){S.apply(aJ.data.field.get(0),[true]);aJ.data.el.removeClass("colorpicker_slider").find("input").focus();t(f).unbind("mouseup",ah);t(f).unbind("mousemove",aB);return false},al=function(aJ){var aK={cal:t(this).parent(),y:t(this).offset().top};aK.preview=aK.cal.data("colorpicker").livePreview;t(f).bind("mouseup",aK,ag);t(f).bind("mousemove",aK,Y)},Y=function(aJ){S.apply(aJ.data.cal.data("colorpicker").fields.eq(4).val(parseInt(360*(150-Math.max(0,Math.min(150,(aJ.pageY-aJ.data.y))))/150,10)).get(0),[aJ.data.preview]);return false},ag=function(aJ){az(aJ.data.cal.data("colorpicker").color,aJ.data.cal.get(0));U(aJ.data.cal.data("colorpicker").color,aJ.data.cal.get(0));t(f).unbind("mouseup",ag);t(f).unbind("mousemove",Y);return false},am=function(aJ){var aK={cal:t(this).parent(),pos:t(this).offset()};aK.preview=aK.cal.data("colorpicker").livePreview;t(f).bind("mouseup",aK,ap);t(f).bind("mousemove",aK,af)},af=function(aJ){S.apply(aJ.data.cal.data("colorpicker").fields.eq(6).val(parseInt(100*(150-Math.max(0,Math.min(150,(aJ.pageY-aJ.data.pos.top))))/150,10)).end().eq(5).val(parseInt(100*(Math.max(0,Math.min(150,(aJ.pageX-aJ.data.pos.left))))/150,10)).get(0),[aJ.data.preview]);return false},ap=function(aJ){az(aJ.data.cal.data("colorpicker").color,aJ.data.cal.get(0));U(aJ.data.cal.data("colorpicker").color,aJ.data.cal.get(0));t(f).unbind("mouseup",ap);t(f).unbind("mousemove",af);return false},ak=function(aJ){t(this).addClass("colorpicker_focus")},aG=function(aJ){t(this).removeClass("colorpicker_focus")},ae=function(aK){var aL=t(this).parent();var aJ=aL.data("colorpicker").color;aL.data("colorpicker").origColor=aJ;V(aJ,aL.get(0));aL.data("colorpicker").onSubmit(aJ,aH(aJ),X(aJ),aL.data("colorpicker").el)},at=function(aJ){var aN=t("#"+t(this).data("colorpickerId"));aN.data("colorpicker").onBeforeShow.apply(this,[aN.get(0)]);var aO=t(this).offset();var aM=ao();var aL=aO.top+this.offsetHeight;var aK=aO.left;if(aL+176>aM.t+aM.h){aL-=this.offsetHeight+176}if(aK+356>aM.l+aM.w){aK-=356}aN.css({left:aK+"px",top:aL+"px"});if(aN.data("colorpicker").onShow.apply(this,[aN.get(0)])!=false){aN.show()
}t(f).bind("mousedown",{cal:aN},aE);return false},aE=function(aJ){if(!ax(aJ.data.cal.get(0),aJ.target,aJ.data.cal.get(0))){if(aJ.data.cal.data("colorpicker").onHide.apply(this,[aJ.data.cal.get(0)])!=false){aJ.data.cal.hide()}t(f).unbind("mousedown",aE)}},ax=function(aL,aK,aJ){if(aL==aK){return true}if(aL.contains){return aL.contains(aK)}if(aL.compareDocumentPosition){return !!(aL.compareDocumentPosition(aK)&16)}var aM=aK.parentNode;while(aM&&aM!=aJ){if(aM==aL){return true}aM=aM.parentNode}return false},ao=function(){var aJ=f.compatMode=="CSS1Compat";return{l:B.pageXOffset||(aJ?f.documentElement.scrollLeft:f.body.scrollLeft),t:B.pageYOffset||(aJ?f.documentElement.scrollTop:f.body.scrollTop),w:B.innerWidth||(aJ?f.documentElement.clientWidth:f.body.clientWidth),h:B.innerHeight||(aJ?f.documentElement.clientHeight:f.body.clientHeight)}},T=function(aJ){return{h:Math.min(360,Math.max(0,aJ.h)),s:Math.min(100,Math.max(0,aJ.s)),b:Math.min(100,Math.max(0,aJ.b))}},aC=function(aJ){return{r:Math.min(255,Math.max(0,aJ.r)),g:Math.min(255,Math.max(0,aJ.g)),b:Math.min(255,Math.max(0,aJ.b))}},an=function(aL){var aJ=6-aL.length;if(aJ>0){var aM=[];for(var aK=0;aK<aJ;aK++){aM.push("0")}aM.push(aL);aL=aM.join("")}return aL},R=function(aJ){var aJ=parseInt(((aJ.indexOf("#")>-1)?aJ.substring(1):aJ),16);return{r:aJ>>16,g:(aJ&65280)>>8,b:(aJ&255)}},ab=function(aJ){return W(R(aJ))},W=function(aL){var aK={h:0,s:0,b:0};var aM=Math.min(aL.r,aL.g,aL.b);var aJ=Math.max(aL.r,aL.g,aL.b);var aN=aJ-aM;aK.b=aJ;aK.s=aJ!=0?255*aN/aJ:0;if(aK.s!=0){if(aL.r==aJ){aK.h=(aL.g-aL.b)/aN}else{if(aL.g==aJ){aK.h=2+(aL.b-aL.r)/aN}else{aK.h=4+(aL.r-aL.g)/aN}}}else{aK.h=-1}aK.h*=60;if(aK.h<0){aK.h+=360}aK.s*=100/255;aK.b*=100/255;return aK},X=function(aJ){var aL={};var aP=Math.round(aJ.h);var aO=Math.round(aJ.s*255/100);var aK=Math.round(aJ.b*255/100);if(aO==0){aL.r=aL.g=aL.b=aK}else{var aQ=aK;var aN=(255-aO)*aK/255;var aM=(aQ-aN)*(aP%60)/60;if(aP==360){aP=0}if(aP<60){aL.r=aQ;aL.b=aN;aL.g=aN+aM}else{if(aP<120){aL.g=aQ;aL.b=aN;aL.r=aQ-aM}else{if(aP<180){aL.g=aQ;aL.r=aN;aL.b=aN+aM}else{if(aP<240){aL.b=aQ;aL.r=aN;aL.g=aQ-aM}else{if(aP<300){aL.b=aQ;aL.g=aN;aL.r=aN+aM}else{if(aP<360){aL.r=aQ;aL.g=aN;aL.b=aQ-aM}else{aL.r=0;aL.g=0;aL.b=0}}}}}}}return{r:Math.round(aL.r),g:Math.round(aL.g),b:Math.round(aL.b)}},ar=function(aJ){var aK=[aJ.r.toString(16),aJ.g.toString(16),aJ.b.toString(16)];t.each(aK,function(aL,aM){if(aM.length==1){aK[aL]="0"+aM}});return aK.join("")},aH=function(aJ){return ar(X(aJ))},Z=function(){var aK=t("#ff-drop ol input:checked").next(),aJ=aK.text()||aK.val();return aJ},av=function(){var aK=t(this).parent();var aJ=aK.data("colorpicker").origColor;aK.data("colorpicker").color=aJ;az(aJ,aK.get(0));U(aJ,aK.get(0));aj(aJ,aK.get(0));aa(aJ,aK.get(0));aw(aJ,aK.get(0));au(aJ,aK.get(0))};return{init:function(aJ){aJ=t.extend({},aq,aJ||{});if(typeof aJ.color=="string"){aJ.color=ab(aJ.color)}else{if(aJ.color.r!=undefined&&aJ.color.g!=undefined&&aJ.color.b!=undefined){aJ.color=W(aJ.color)}else{if(aJ.color.h!=undefined&&aJ.color.s!=undefined&&aJ.color.b!=undefined){aJ.color=T(aJ.color)}else{return this}}}return this.each(function(){if(!t(this).data("colorpickerId")){var aK=t.extend({},aJ);aK.origColor=aJ.color;var aM="collorpicker_"+parseInt(Math.random()*1000);t(this).data("colorpickerId",aM);var aL=t(aF).attr("id",aM);if(aL){}if(aK.flat){aL.appendTo(this).show()}else{aL.appendTo(f.body)}aK.fields=aL.find("input").bind("keyup",ac).bind("change",S).bind("blur",ad).bind("focus",aA);aL.find("span").bind("mousedown",ay).end().find(">div.colorpicker_current_color").bind("click",av);aK.selector=aL.find("div.colorpicker_color").bind("mousedown",am);aK.selectorIndic=aK.selector.find("div div");aK.el=this;aK.hue=aL.find("div.colorpicker_hue div");aL.find("div.colorpicker_hue").bind("mousedown",al);aK.newColor=aL.find("div.colorpicker_new_color");aK.currentColor=aL.find("div.colorpicker_current_color");aL.data("colorpicker",aK);aL.find("div.colorpicker_submit").bind("mouseenter",ak).bind("mouseleave",aG).bind("click",ae);
az(aK.color,aL.get(0));aj(aK.color,aL.get(0));U(aK.color,aL.get(0));aw(aK.color,aL.get(0));aa(aK.color,aL.get(0));V(aK.color,aL.get(0));au(aK.color,aL.get(0));if(aK.flat){aL.css({position:"relative",display:"block"})}else{t(this).bind(aK.eventName,at)}}})},showPicker:function(){return this.each(function(){if(t(this).data("colorpickerId")){at.apply(this)}})},hidePicker:function(){return this.each(function(){if(t(this).data("colorpickerId")){t("#"+t(this).data("colorpickerId")).hide()}})},setColor:function(aJ){if(typeof aJ=="string"){aJ=ab(aJ)}else{if(aJ.r!=undefined&&aJ.g!=undefined&&aJ.b!=undefined){aJ=W(aJ)}else{if(aJ.h!=undefined&&aJ.s!=undefined&&aJ.b!=undefined){aJ=T(aJ)}else{return this}}}return this.each(function(){if(t(this).data("colorpickerId")){var aK=t("#"+t(this).data("colorpickerId"));aK.data("colorpicker").color=aJ;aK.data("colorpicker").origColor=aJ;az(aJ,aK.get(0));aj(aJ,aK.get(0));U(aJ,aK.get(0));aw(aJ,aK.get(0));aa(aJ,aK.get(0));V(aJ,aK.get(0));au(aJ,aK.get(0))}})}}}();t.fn.extend({ColorPicker:P.init,ColorPickerHide:P.hidePicker,ColorPickerShow:P.showPicker,ColorPickerSetColor:P.setColor});z()}}(this,this.document));